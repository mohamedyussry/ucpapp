# ๐ WooRewards REST API Documentation

ูุฐุง ุงูุชูุซูู ูุดุฑุญ ููููุฉ ุงูุฑุจุท ูุน ูุธุงู ุงูููุงุก ูุงูููุงูุขุช (WooRewards) ุนุจุฑ ุชุทุจูู ุงูููุจุงูู ุฃู ุฃู ูุธุงู ุฎุงุฑุฌู.

## ๐ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ (Base Info)
*   **Base URL:** `https://ucpksa.com/wp-json/`
*   **Namespace:** `woorewards/v1`
*   **Authentication:** ูุชุทูุจ ุงููุธุงู ูุตุงุฏูุฉ ูุณุชุฎุฏู (User Authentication). ูููู ุงุณุชุฎุฏุงู (JWT, Application Passwords, or Cookie-based nonces).

---

## ๐ฆ ููุงุท ุงูููุงูุฉ (Endpoints)

### 1๏ธโฃ ุฌูุจ ุจูุงูุงุช ุงูุนููู (Loyalty Data)
ููุญุตูู ุนูู ุฑุตูุฏ ุงูููุงุท ุงูุญุงูู ูุงููุณุชูู (Tier).

*   **Endpoint:** `/loyalty`
*   **Method:** `GET`
*   **Permission:** Logged-in User only.
*   **ุงูุฅุณุชุฌุงุจุฉ ุงููุชููุนุฉ (200 OK):**
```json
{
    "points_balance": 150,
    "current_tier_id": 2,
    "tier_name": "Silver Tier",
    "spending_last_12_months": 2500.50
}
```

---

### 2๏ธโฃ ุณุฌู ุญุฑูุงุช ุงูููุงุท (Points History)
ููุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงูุนูููุงุช ุงูุณุงุจูุฉ (ูุณุจุ ุฎุตูุ ุงุณุชุฑุฌุงุน).

*   **Endpoint:** `/history`
*   **Method:** `GET`
*   **Permission:** Logged-in User only.
*   **ุงูุฅุณุชุฌุงุจุฉ ุงููุชููุนุฉ (200 OK):**
```json
[
    {
        "id": "1",
        "user_id": "10",
        "points": "50",
        "operation": "earn",
        "order_id": "123",
        "creation_date": "2024-01-21 14:30:00"
    },
    {
        "id": "2",
        "user_id": "10",
        "points": "-20",
        "operation": "redeem",
        "order_id": "125",
        "creation_date": "2024-01-22 10:15:00"
    }
]
```
*(ููุงุญุธุฉ: ุงูููุงุท ุงูุณุงูุจุฉ ุชุนูู ุงุณุชููุงูุ ูุงูููุฌุจุฉ ุชุนูู ูุณุจ).*

---

### 3๏ธโฃ ุฌูุจ ุฌููุน ูุณุชููุงุช ุงูููุงุก (All Tiers)
ููุญุตูู ุนูู ูุงุฆูุฉ ุจุฌููุน ุงููุณุชููุงุช ุงููุชุงุญุฉ ูู ุงููุชุฌุฑ ูุดุฑูุทูุง.

*   **Endpoint:** `/tiers`
*   **Method:** `GET`
*   **Permission:** Public (No authentication required).
*   **ุงูุฅุณุชุฌุงุจุฉ ุงููุชููุนุฉ (200 OK):**
```json
[
    {
        "id": "1",
        "name": "Bronze",
        "min_spending": "0.00",
        "points_per_100": "5",
        "tier_order": "1"
    },
    {
        "id": "2",
        "name": "Silver",
        "min_spending": "1000.00",
        "points_per_100": "10",
        "tier_order": "2"
    }
]
```

---

### 4๏ธโฃ ุชุญุฏูุซ ููุงุท ุงููุณุชุฎุฏู (Update Points) - ุฎุงุต ุจุงูุชุทุจูู
ููุณุชุฎุฏู ูุฅุถุงูุฉ ุฃู ุฎุตู ููุงุท ูููุณุชุฎุฏู ุนูุฏ ุงูููุงู ุจุนูููุฉ ุดุฑุงุก ุฃู ูุดุงุท ูุนูู ุฏุงุฎู ุงูุชุทุจูู.

*   **Endpoint:** `/update-points`
*   **Method:** `POST`
*   **Permission:** User Authentication (ุฃู ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู).
    *   *ููุงุญุธุฉ ุฃูููุฉ:* ุงูุนููู ููููู ุชุญุฏูุซ ููุงุทู ุงูุดุฎุตูุฉ ููุทุ ุจูููุง ุงููุฏูุฑ ููููู ุชุญุฏูุซ ุฃู ูุณุชุฎุฏู.
*   **Parameters (JSON Body):**
    *   `user_id`: (Required) ูุนุฑู ุงููุณุชุฎุฏู.
    *   `points`: (Required) ุนุฏุฏ ุงูููุงุท (ููุฌุจ ููุฅุถุงูุฉุ ุณุงูุจ ููุฎุตู).
    *   `operation`: (Optional) ููุน ุงูุนูููุฉ (ูุซู: `earn`, `spend`, `manual`). ุงูุงูุชุฑุงุถู ูู `earn`.
    *   `order_id`: (Optional) ุฑูู ุงูุทูุจ ุงููุฑุชุจุท ุจุงูุนูููุฉ.

*   **ุงูุฅุณุชุฌุงุจุฉ ุงููุชููุนุฉ (200 OK):**
```json
{
    "success": true,
    "message": "Points updated successfully.",
    "user_id": 10,
    "added_points": 50,
    "new_balance": 200
}
```

---

### 5๏ธโฃ ุฌูุจ ุฅุนุฏุงุฏุงุช ุงููุธุงู (General Settings)
ููุญุตูู ุนูู ูุนุฏู ุงูุชุญููู ูุงูุนููุฉ ุงููุณุชุฎุฏูุฉ ูู ุงููุชุฌุฑ (ูููุฏ ููุทุงุจู ุงูุญุณุงุจุงุช ูู ุงูุชุทุจูู).

*   **Endpoint:** `/settings`
*   **Method:** `GET`
*   **Permission:** Public.
*   **ุงูุฅุณุชุฌุงุจุฉ ุงููุชููุนุฉ (200 OK):**
```json
{
    "conversion_rate": {
        "points": 10,
        "value": 1,
        "label": "10 Points = 1 SAR"
    },
    "currency": "SAR",
    "currency_symbol": "SR"
}
```

---

## ๐๏ธ ููุงุญุธุงุช ุชูููุฉ ูููุจุฑูุฌ:
1.  **ุญุงูุงุช ุงูุฎุทุฃ:** ูู ุญุงู ุนุฏู ุชุณุฌูู ุงูุฏุฎููุ ุณูุนูุฏ ุงููุธุงู ููุฏ `401 Unauthorized`.
2.  **ุชุญุฏูุซ ุงูุจูุงูุงุช:** ูุชู ุชุญุฏูุซ ุงูุฑุตูุฏ ูุงููุณุชูู ููุฑุงู ุนูุฏ ุฅุชูุงู ุงูุทูุจุงุช ุฃู ุงุณุชุฑุฌุงุนูุง ูู ุงููุชุฌุฑ.
3.  **ุงูุนููุงุช:** ุงููุจุงูุบ ุงููุงููุฉ (`spending_last_12_months`) ุชุฑุฌุน ูู `Float` ุจููุณ ุนููุฉ ุงููุชุฌุฑ ุงูุงูุชุฑุงุถูุฉ.
